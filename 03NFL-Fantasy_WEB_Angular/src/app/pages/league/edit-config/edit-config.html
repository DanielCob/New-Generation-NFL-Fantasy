<div class="root">
  <div class="row" *ngIf="loading()">
    <mat-progress-spinner mode="indeterminate" diameter="36"></mat-progress-spinner>
    <span>Cargando configuración…</span>
  </div>

  <div class="row error" *ngIf="!loading() && error()">
    <mat-icon>error</mat-icon> {{ error() }}
  </div>

  <form *ngIf="!loading() && !error()" [formGroup]="form" class="grid">
    <mat-form-field appearance="outline">
      <mat-label>Nombre</mat-label>
      <input matInput formControlName="name">
    </mat-form-field>

    <mat-form-field class="full" appearance="outline">
      <mat-label>Descripción</mat-label>
      <textarea matInput rows="2" formControlName="description"></textarea>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Team slots</mat-label>
      <input matInput type="number" min="2" max="32" formControlName="teamSlots">
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Playoff teams</mat-label>
      <input matInput type="number" min="2" max="16" formControlName="playoffTeams">
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Position format ID</mat-label>
      <input matInput type="number" formControlName="positionFormatID">
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Scoring schema ID</mat-label>
      <input matInput type="number" formControlName="scoringSchemaID">
    </mat-form-field>

    <mat-slide-toggle formControlName="allowDecimals">Permitir decimales</mat-slide-toggle>
    <mat-slide-toggle formControlName="tradeDeadlineEnabled">Trade deadline habilitado</mat-slide-toggle>

    <mat-form-field appearance="outline">
      <mat-label>Trade deadline (ISO)</mat-label>
      <input matInput placeholder="2025-12-01T00:00:00Z" formControlName="tradeDeadlineDate">
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Max roster changes / team</mat-label>
      <input matInput type="number" min="0" formControlName="maxRosterChangesPerTeam">
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Max free agent adds / team</mat-label>
      <input matInput type="number" min="0" formControlName="maxFreeAgentAddsPerTeam">
    </mat-form-field>

    <div class="full actions">
      <button mat-raised-button color="primary" type="button" (click)="save()" [disabled]="form.invalid || saving()">
        <mat-icon>save</mat-icon> Guardar
      </button>
    </div>
  </form>
</div>
