<mat-card class="ntl-card">
  <div class="ntl-header">
    <div class="title">
      <mat-icon>groups</mat-icon>
      <span>NFL Teams</span>
    </div>
    <button *ngIf="isAdmin()" mat-raised-button color="primary" (click)="goToCreate()">
      <mat-icon>add</mat-icon>
      Create team
    </button>
  </div>

  <!-- Filtros -->
  <app-filters-panel
    (filtersChange)="onFiltersChange($event)"
    [initialSearch]="searchTeam()"
    [initialCity]="filterCity()"
    [initialIsActive]="filterIsActive()">
  </app-filters-panel>

  <!-- Contenido -->
  <div class="ntl-body" *ngIf="!loading(); else loadingTpl">
    <div *ngIf="teams().length === 0" class="empty">
      <mat-icon>info</mat-icon>
      <span>No teams found with current filters.</span>
    </div>

    <div class="grid" *ngIf="teams().length > 0">
      <app-team-card
        *ngFor="let t of teams()"
        [team]="t"
        (view)="onViewDetails(t.NFLTeamID)"
        (edit)="onEditTeam(t.NFLTeamID)">
      </app-team-card>
    </div>


    <!-- PaginaciÃ³n -->
    <mat-paginator
      [length]="totalRecords()"
      [pageIndex]="currentPage() - 1"
      [pageSize]="pageSize()"
      [pageSizeOptions]="[50]"
      (page)="onPageChange($event)"
      *ngIf="totalRecords() > pageSize()"
    ></mat-paginator>
  </div>
</mat-card>

<ng-template #loadingTpl>
  <div class="ntl-loading"><mat-spinner></mat-spinner></div>
</ng-template>
