<mat-card *ngIf="!loading(); else loadingTpl" class="mt-card">
  <mat-card-header>
    <div mat-card-avatar class="team-avatar">
      @if (myTeam()?.thumbnailUrl) {
        <img [src]="myTeam()?.thumbnailUrl" alt="team" />
      } @else if (myTeam()?.teamImageUrl) {
        <img [src]="myTeam()?.teamImageUrl" alt="team" />
      } @else {
        <mat-icon>shield</mat-icon>
      }
    </div>
    <mat-card-title>{{ myTeam()?.teamName }}</mat-card-title>
    <mat-card-subtitle>
      {{ myTeam()?.leagueName ?? '' }} Â· Roster: {{ myTeam()?.roster?.length ?? 0 }}
    </mat-card-subtitle>
    <span class="spacer"></span>
    <button mat-stroked-button [routerLink]="['/teams', teamId(), 'edit-branding']">
      <mat-icon>edit</mat-icon>&nbsp;Branding
    </button>
    <button mat-flat-button color="primary" [routerLink]="['/teams', teamId(), 'manage-roster']">
      <mat-icon>group_add</mat-icon>&nbsp;Manage roster
    </button>
  </mat-card-header>

  <mat-card-content>
    <app-roster-filters
      class="mb-3"
      (filtersChange)="onFiltersChange($event)">
    </app-roster-filters>

    <app-roster-list
      [roster]="filteredRoster()">
    </app-roster-list>

    <section class="mt-4">
      <h3 class="section-title">
        <mat-icon>pie_chart</mat-icon>&nbsp; Distribution
      </h3>
      <app-distribution-panel
        [distribution]="myTeam()?.distribution || []">
      </app-distribution-panel>
    </section>
  </mat-card-content>
</mat-card>

<ng-template #loadingTpl>
  <div class="center"><mat-spinner></mat-spinner></div>
</ng-template>
